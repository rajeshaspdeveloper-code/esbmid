# ----------------------------
# Server Configuration
# ----------------------------
server.port=8082
server.servlet.context-path=/
server.compression.enabled=true
server.http2.enabled=true

# ----------------------------
# Spring Configuration
# ----------------------------
spring.application.name=esb-router
spring.main.banner-mode=console
 
# Database Configuration
spring.datasource.url=jdbc:sqlserver://localhost:1433;databaseName=ESB_DB;instanceName=RKSERVICE
spring.datasource.username=sa
spring.datasource.password=P@ssw0rd
spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver


# HikariCP Configuration
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.pool-name=ESB-HikariCP
spring.datasource.hikari.leak-detection-threshold=60000

# Jackson Configuration
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.deserialization.fail-on-unknown-properties=false
spring.jackson.default-property-inclusion=non_null

# Cache Configuration
spring.cache.type=simple

# Async Configuration
spring.task.execution.pool.core-size=5
spring.task.execution.pool.max-size=20
spring.task.execution.pool.queue-capacity=100

# ----------------------------
# MyBatis Configuration
# ----------------------------
mybatis.mapper-locations=classpath:mappers/*.xml
mybatis.configuration.map-underscore-to-camel-case=true
mybatis.configuration.cache-enabled=true
mybatis.configuration.lazy-loading-enabled=true
mybatis.configuration.multiple-result-sets-enabled=true
mybatis.configuration.use-column-label=true
mybatis.configuration.use-generated-keys=false
mybatis.configuration.auto-mapping-behavior=partial
mybatis.configuration.default-executor-type=simple
mybatis.configuration.default-statement-timeout=25000

# ----------------------------
# ESB Custom Configuration
# ----------------------------
esb.plugin.directory=plugins
esb.plugin.reload.enabled=true
esb.plugin.reload.interval=300000
esb.plugin.thread.core-pool-size=5
esb.plugin.thread.max-pool-size=20
esb.plugin.thread.queue-capacity=100

esb.audit.enabled=true
esb.audit.cleanup.enabled=true
esb.audit.cleanup.retention-days=90
esb.audit.cleanup.schedule=0 0 2 * * ?

# ----------------------------
# Logging Configuration
# ----------------------------
logging.level.root=INFO
logging.level.com.esb.middleware=DEBUG
logging.level.com.esb.plugin=DEBUG
logging.level.org.springframework.web=INFO
logging.level.org.mybatis=DEBUG

logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
logging.file.name=logs/esb-router.log
logging.file.max-size=100MB
logging.file.max-history=30

# ----------------------------
# Actuator / Management Configuration
# ----------------------------
management.endpoints.web.exposure.include=health,info,metrics,env,configprops,beans,mappings
management.endpoint.health.show-details=always
management.health.db.enabled=true

# ----------------------------
# Application Info
# ----------------------------
info.app.name=ESB Router
info.app.description=Enterprise Service Bus Router with Plugin Architecture
info.app.version=1.0.0
info.app.build-time=@timestamp@
